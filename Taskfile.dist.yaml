version: '3'

env:
  ENV: ${ENV} | default dev
  APP: app

dotenv: [ '.env', '.env.{{ENV}}' ]

vars:
  DOCKER: docker
  POSTGRES: postgres

includes:
  app: ./taskfiles/SymfonyTasks.yaml
  composer: ./taskfiles/ComposerTasks.yaml
  db: ./taskfiles/DbTasks.yaml
  docker: ./taskfiles/DockerTasks.yaml
  lint: ./taskfiles/LintTasks.yaml
  migration: ./taskfiles/MigrationTasks.yaml
  phpunit: ./taskfiles/PhpUnitTasks.yaml
  schema: ./taskfiles/SchemaTasks.yaml

tasks:
  lint:
    desc: "Run all linting tasks"
    cmds:
      - task: lint:all

  phpunit:
    desc: "Run all PHPUnit tests"
    cmds:
      - task: phpunit:all
