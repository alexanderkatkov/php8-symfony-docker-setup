version: '3'

tasks:
  create:
    desc: 'Create DB schema for given environment: "task schema:create -- test", default environment is "dev"'
    cmds:
      - task: :app:exec
        vars: { CLI_ARGS: "bin/console doctrine:schema:create --env={{.CLI_ARGS | default .ENV}}" }

  drop:
    desc: 'Drop DB schema for given environment: "task schema:drop -- test", default environment is "dev"'
    cmds:
      - task: :app:exec
        vars: { CLI_ARGS: "bin/console doctrine:schema:drop --env={{.CLI_ARGS | default .ENV}} --force --full-database" }

  validate:
    desc: 'Validate DB schema for given environment: "task schema:validate -- test", default environment is "dev"'
    cmds:
      - task: :app:exec
        vars: { CLI_ARGS: "bin/console doctrine:schema:validate --env={{.CLI_ARGS | default .ENV}}" }
